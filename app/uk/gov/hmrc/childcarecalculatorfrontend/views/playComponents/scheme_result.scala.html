@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.childcarecalculatorfrontend.utils.ChildcareConstants.tcSchemeGuidanceLinkUrl
@import uk.gov.hmrc.childcarecalculatorfrontend.models.views.EligibilityModel
@import uk.gov.hmrc.govukfrontend.views.html.components._

@this(
    heading: heading,
    detailSummaryComponent: detail_summary,
    govukWarningText : GovukWarningText
)

@(
        title: String,
        id: Option[String] = None,
        couldGet: Option[String] = None,
        eligibility: Option[EligibilityModel] = None,
        periodText: Option[String] = None,
        para1: Option[String] = None,
        para2: Option[Html] = None,
        para3: Option[String] = None,
        detailSummary: Option[String] = None,
        detailPara1: Option[String] = None,
        detailPara2: Option[String] = None,
        detailPara2List: Seq[String] = Nil,
        detailPara2WithLink: Option[Html] = None,
        detailPara3: Option[String] = None,
        detailPara3WithLink: Option[Html] = None,
        detailPara4: Option[String] = None,
        notEligibleID1: Option[String] = None,
        notEligibleID2: Option[String] = None,
        warningMessage: Option[String] = None,
        displayTCGuidanceLink: Boolean = false
)(implicit messages: Messages, lang: Lang)

@heading(heading=title, headingSize = "heading-m", id = id)

@if(warningMessage.isDefined) {
    @govukWarningText(WarningText(
        iconFallbackText = "Warning",
        content = Text(warningMessage.get)
    ))
}

@if(couldGet.isDefined){
<p class="govuk-inset-text">@couldGet <strong class="govuk-bold" id="@eligibility.fold("")(_.id)">@eligibility.fold("")(_.value)</strong>
    @periodText</p>
}

@if(para1.isDefined) {
<p class="govuk-body" @if(notEligibleID1.isDefined) {id="@notEligibleID1"}>@para1 @if(displayTCGuidanceLink){<a class="govuk-link" rel="external" target="_blank"
                                                                                             id="tcGuidanceLink" data-journey-click="link - click:@messages("result.not.eligible.title.ga") @title:@messages("result.tc.scheme.guidance.link")" href="@tcSchemeGuidanceLinkUrl">
    @messages("result.tc.scheme.guidance.link")<span class="govuk-visually-hidden">@messages("feedback.hint.link.opens.new.tab")</span>
    </a>
    }
</p>
}

@if(para2.isDefined) {
<p class="govuk-body" @if(notEligibleID2.isDefined) { id="@notEligibleID2" }>@para2</p>
}

@if(detailPara3WithLink.isDefined) {@detailPara3WithLink}

@if(para3.isDefined) {
    <p class="govuk-body">@para3</p>
}

@if(id.isDefined) {
    @detailSummaryComponent(
        summary = detailSummary.get,
        id = id.map(_ + "-details"),
    ){
        <p class="govuk-body">@detailPara1</p>
        @if(detailPara2.isDefined) {<p class="govuk-body">@detailPara2</p>}
        @if(detailPara2WithLink.isDefined) {@detailPara2WithLink}
        @if(detailPara2List.nonEmpty) {
            @list(bulletList = detailPara2List)
        }
        @if(detailPara3.isDefined) {<p class="govuk-body">@detailPara3</p>}
        @if(detailPara4.isDefined) {<p class="govuk-body">@detailPara4</p>}
    }
}

<hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">